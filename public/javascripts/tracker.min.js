function we3cTracker(a){this.accountApiKey=a.accountId;this.eventServer=("https:"==document.location.protocol?"https://":"http://")+"clickheat.wethreecreatives.com/v1/track.gif";this.location=document.location.href;this.eventTypesList={init:0,mousedown:1,mousemove:2,resize:3,scroll:4,locationChange:5};this.eventsRepo=[];this.offloadThreshold=60;this.lastMouseMoveState=[0,0]}
we3cTracker.prototype.trackEvent=function(a){var b={ts:(new Date).getTime()};switch(a.type){case "init":_we3ctr.submitSessionStorage();b.e=_we3ctr.eventTypesList[a.type];b.loc=document.location.toString();a=_we3ctr.getWindowsSize();b.w=a.w;b.h=a.h;b.t=_we3ctr.getScrollTop();b.l=_we3ctr.getScrollLeft();this.eventsRepo.push(b);break;case "unload":_we3ctr.storeToSessionStorage();return;case "mousedown":b.e=_we3ctr.eventTypesList[a.type];if(1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-
1].e==b.e&&1E3>b.ts-_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].ts)return;b.x=a.clientX+_we3ctr.getScrollLeft();b.y=a.clientY+_we3ctr.getScrollTop();a=_we3ctr.getWindowsSize();b.w=a.w;b.h=a.h;_we3ctr.eventsRepo.push(b);break;case "mousemove":b.e=_we3ctr.eventTypesList[a.type];b.x=a.clientX+_we3ctr.getScrollLeft();b.y=a.clientY+_we3ctr.getScrollTop();a=_we3ctr.getWindowsSize();b.w=a.w;b.h=a.h;if(1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].e==b.e){var c=_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-
1].x-b.x,a=_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].y-b.y;if(8>=Math.abs(c)&&8>=Math.abs(a))return;var d=0;0<=c?d=1:0>c&&(d=-1);c=0;0<=a?c=1:0>a&&(c=-1);a=[d,c];if(0==a[0]&&0==a[1])return;a[0]!=_we3ctr.lastMouseMoveState[0]||a[1]!=_we3ctr.lastMouseMoveState[1]?(_we3ctr.eventsRepo.push(b),_we3ctr.lastMouseMoveState=a):_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=b}else _we3ctr.eventsRepo.push(b);break;case "resize":b.e=_we3ctr.eventTypesList[a.type];a=_we3ctr.getWindowsSize();b.w=a.w;b.h=
a.h;1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].e==b.e?_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=b:_we3ctr.eventsRepo.push(b);break;case "scroll":b.e=_we3ctr.eventTypesList[a.type],b.t=_we3ctr.getScrollTop(),b.l=_we3ctr.getScrollLeft(),1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].e==b.e?(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].t>b.t?b.d="t":_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].t<b.t?b.d="d":_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-
1].l>b.l?b.d="l":_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].l<b.l&&(b.d="r"),_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].d==b.d?_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=b:_we3ctr.eventsRepo.push(b)):(b.d="",_we3ctr.eventsRepo.push(b))}_we3ctr.eventsRepo.length>=_we3ctr.offloadThreshold&&(_we3ctr.offloadData(),_we3ctr.lastMouseMoveState=[0,0])};
we3cTracker.prototype.storeToSessionStorage=function(){if("undefined"!==typeof Storage){var a=this.repoStringify(this.eventsRepo);sessionStorage._we3cTrackerStoredState=a}};we3cTracker.prototype.submitSessionStorage=function(){null==sessionStorage._we3cTrackerStoredState||(!sessionStorage._we3cTrackerStoredState||3>sessionStorage._we3cTrackerStoredState.length)||(this.submitData(this.base64Encode(sessionStorage._we3cTrackerStoredState)),sessionStorage._we3cTrackerStoredState=null)};
we3cTracker.prototype.periodicOffload=function(){0<this.eventsRepo.length&&1E4<(new Date).getTime()-this.eventsRepo[this.eventsRepo.length-1].ts&&this.offloadData();setTimeout("_we3ctr.periodicOffload()",1E4)};we3cTracker.prototype.offloadData=function(){var a=this.eventsRepo;this.eventsRepo=[];this.submitData(this.base64Encode(this.repoStringify(a)))};
we3cTracker.prototype.submitData=function(a){null==a||5>a.length||((new Image).src=this.eventServer+"?d="+a+"&host="+document.location.host+"&key="+this.accountApiKey)};we3cTracker.prototype.repoStringify=function(a){var b="",c;for(c in a){var d="",e;for(e in a[c])"ts"!=e&&(d+=a[c][e]+"|");d+=a[c].ts;b+=d+"}"}return b};
we3cTracker.prototype.initTracking=function(){this.trackEvent({type:"init"});this.addEventListener(document,"mousedown",this.trackEvent);this.addEventListener(document,"mousemove",this.trackEvent);this.addEventListener(window,"resize",this.trackEvent);this.addEventListener(window,"scroll",this.trackEvent);this.addEventListener(window,"unload",this.trackEvent)};
we3cTracker.prototype.addEventListener=function(a,b,c){document.addEventListener?a?a.addEventListener(b,c,!1):addEventListener(b,c,!1):attachEvent&&(a?a.attachEvent("on"+b,c):attachEvent("on"+b,c))};
we3cTracker.prototype.getWindowsSize=function(){if("undefined"!=typeof window.innerWidth)return{w:window.innerWidth,h:window.innerHeight};if("undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth)return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}};
we3cTracker.prototype.getScrollLeft=function(){return window.pageXOffset?window.pageXOffset:document.documentElement?document.documentElement.scrollLeft:document.body?document.body.scrollLeft:0};we3cTracker.prototype.getScrollTop=function(){return window.pageYOffset?window.pageYOffset:document.documentElement?document.documentElement.scrollTop:document.body?document.body.scrollTop:0};
we3cTracker.prototype.base64Encode=function(a){var b,c,d,e,g=0,h=0,f="",f=[];if(!a)return a;do b=a.charCodeAt(g++),c=a.charCodeAt(g++),d=a.charCodeAt(g++),e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,f[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);
while(g<a.length);f=f.join("");a=a.length%3;return(a?f.slice(0,a-3):f)+"===".slice(a||3)};_we3ctr=new we3cTracker(_we3ctr);_we3ctr.initTracking();setTimeout("_we3ctr.periodicOffload()",1E4);