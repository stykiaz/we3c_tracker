function we3cTracker(a){this.accountApiKey=a.accountId;this.eventServer=("https:"==document.location.protocol?"https://":"http://")+"clickheat.wethreecreatives.com/v1/track.gif";this.location=document.location.href;this.eventTypesList={init:0,mousedown:1,mousemove:2,resize:3,scroll:4,locationChange:5};this.eventsRepo=[];this.offloadThreshold=60;this.lastMouseMoveState=[0,0]}we3cTracker.prototype.trackEvent=function(a){var b={ts:(new Date).getTime()};switch(a.type){case"init":_we3ctr.submitSessionStorage();b["e"]=_we3ctr.eventTypesList[a.type];b["loc"]=document.location.toString();var c=_we3ctr.getWindowsSize();b["w"]=c["w"];b["h"]=c["h"];b["t"]=_we3ctr.getScrollTop();b["l"]=_we3ctr.getScrollLeft();this.eventsRepo.push(b);break;case"unload":_we3ctr.storeToSessionStorage();return;case"mousedown":b["e"]=_we3ctr.eventTypesList[a.type];if(_we3ctr.eventsRepo.length>=1&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["e"]==b["e"]&&b["ts"]-_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["ts"]<1e3){return}b["x"]=a.clientX;b["y"]=a.clientY;var c=_we3ctr.getWindowsSize();b["w"]=c["w"];b["h"]=c["h"];_we3ctr.eventsRepo.push(b);break;case"mousemove":b["e"]=_we3ctr.eventTypesList[a.type];b["x"]=a.clientX;b["y"]=a.clientY;var c=_we3ctr.getWindowsSize();b["w"]=c["w"];b["h"]=c["h"];if(_we3ctr.eventsRepo.length>=1&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["e"]==b["e"]){var d=_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["x"]-b["x"];var e=_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["y"]-b["y"];if(Math.abs(d)<=8&&Math.abs(e)<=8)return;var f=0;if(d>=0)f=1;else if(d<0)f=-1;var g=0;if(e>=0)g=1;else if(e<0)g=-1;var h=[f,g];if(h[0]==0&&h[1]==0)return;if(h[0]!=_we3ctr.lastMouseMoveState[0]||h[1]!=_we3ctr.lastMouseMoveState[1]){_we3ctr.eventsRepo.push(b);_we3ctr.lastMouseMoveState=h}else{_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=b}}else{_we3ctr.eventsRepo.push(b)}break;case"resize":b["e"]=_we3ctr.eventTypesList[a.type];var c=_we3ctr.getWindowsSize();b["w"]=c["w"];b["h"]=c["h"];if(_we3ctr.eventsRepo.length>=1&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["e"]==b["e"])_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=b;else _we3ctr.eventsRepo.push(b);break;case"scroll":b["e"]=_we3ctr.eventTypesList[a.type];b["t"]=_we3ctr.getScrollTop();b["l"]=_we3ctr.getScrollLeft();if(_we3ctr.eventsRepo.length>=1&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["e"]==b["e"]){if(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["t"]>b["t"])b["d"]="t";else if(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["t"]<b["t"])b["d"]="d";else if(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["l"]>b["l"])b["d"]="l";else if(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["l"]<b["l"])b["d"]="r";if(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]["d"]==b["d"])_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=b;else _we3ctr.eventsRepo.push(b)}else{b["d"]="";_we3ctr.eventsRepo.push(b)}break;default:break}if(_we3ctr.eventsRepo.length>=_we3ctr.offloadThreshold){_we3ctr.offloadData();_we3ctr.lastMouseMoveState=[0,0]}};we3cTracker.prototype.storeToSessionStorage=function(){if(typeof Storage!=="undefined"){var a=this.repoStringify(this.eventsRepo);sessionStorage._we3cTrackerStoredState=a}else{}return};we3cTracker.prototype.submitSessionStorage=function(){if(sessionStorage._we3cTrackerStoredState==null||!sessionStorage._we3cTrackerStoredState||sessionStorage._we3cTrackerStoredState.length<3)return;this.submitData(this.base64Encode(sessionStorage._we3cTrackerStoredState));sessionStorage._we3cTrackerStoredState=null};we3cTracker.prototype.periodicOffload=function(){if(this.eventsRepo.length>0&&(new Date).getTime()-this.eventsRepo[this.eventsRepo.length-1].ts>1e4){this.offloadData()}setTimeout("_we3ctr.periodicOffload()",1e4)};we3cTracker.prototype.offloadData=function(){var a=this.eventsRepo;this.eventsRepo=[];var b=this.repoStringify(a);this.submitData(this.base64Encode(b))};we3cTracker.prototype.submitData=function(a){var b=new Image;b.src=this.eventServer+"?d="+a+"&host="+document.location.host+"&key="+this.accountApiKey};we3cTracker.prototype.repoStringify=function(a){var b="";for(var c in a){var d="";for(var e in a[c]){if(e!="ts")d+=a[c][e]+"|"}d+=a[c]["ts"];b+=d+"}"}return b};we3cTracker.prototype.initTracking=function(){this.trackEvent({type:"init"});this.addEventListener(document,"mousedown",this.trackEvent);this.addEventListener(document,"mousemove",this.trackEvent);this.addEventListener(window,"resize",this.trackEvent);this.addEventListener(window,"scroll",this.trackEvent);this.addEventListener(window,"unload",this.trackEvent)};we3cTracker.prototype.addEventListener=function(a,b,c){if(document.addEventListener){if(a)a.addEventListener(b,c,false);else addEventListener(b,c,false)}else if(attachEvent){if(a)a.attachEvent("on"+b,c);else attachEvent("on"+b,c)}};we3cTracker.prototype.getWindowsSize=function(){if(typeof window.innerWidth!="undefined"){return{w:window.innerWidth,h:window.innerHeight}}else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}};we3cTracker.prototype.getScrollLeft=function(){if(window.pageXOffset)return window.pageXOffset;else if(document.documentElement)return document.documentElement.scrollLeft;else if(document.body)return document.body.scrollLeft;return 0};we3cTracker.prototype.getScrollTop=function(){if(window.pageYOffset)return window.pageYOffset;else if(document.documentElement)return document.documentElement.scrollTop;else if(document.body)return document.body.scrollTop;return 0};we3cTracker.prototype.base64Encode=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,d,e,f,g,h,i,j,k=0,l=0,m="",n=[];if(!a)return a;do{c=a.charCodeAt(k++);d=a.charCodeAt(k++);e=a.charCodeAt(k++);j=c<<16|d<<8|e;f=j>>18&63;g=j>>12&63;h=j>>6&63;i=j&63;n[l++]=b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(i)}while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)};_we3ctr=new we3cTracker(_we3ctr);_we3ctr.initTracking();setTimeout("_we3ctr.periodicOffload()",1e4)