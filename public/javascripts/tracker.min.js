function we3cTracker(b){this.accountApiKey=b.accountId;this.eventServer=("https:"==document.location.protocol?"https://":"http://")+"clickheat.wethreecreatives.com/v1/track.gif";this.location=document.location.href;this.eventTypesList={init:0,mousedown:1,mousemove:2,resize:3,scroll:4,locationChange:5};this.eventsRepo=[];this.offloadThreshold=60;this.lastMouseMoveState=[0,0]}
we3cTracker.prototype.trackEvent=function(b){var a={ts:(new Date).getTime()};switch(b.type){case "init":_we3ctr.submitSessionStorage();a.e=_we3ctr.eventTypesList[b.type];a.loc=document.location.toString();b=_we3ctr.getWindowsSize();a.w=b.w;a.h=b.h;a.t=_we3ctr.getScrollTop();a.l=_we3ctr.getScrollLeft();this.eventsRepo.push(a);break;case "unload":_we3ctr.storeToSessionStorage();return;case "mousedown":a.e=_we3ctr.eventTypesList[b.type];if(1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-
1].e==a.e&&1E3>a.ts-_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].ts)return;a.x=b.clientX+_we3ctr.getScrollLeft();a.y=b.clientY+_we3ctr.getScrollTop();b=_we3ctr.getWindowsSize();a.w=b.w;a.h=b.h;_we3ctr.eventsRepo.push(a);break;case "mousemove":a.e=_we3ctr.eventTypesList[b.type];a.x=b.clientX+_we3ctr.getScrollLeft();a.y=b.clientY+_we3ctr.getScrollTop();b=_we3ctr.getWindowsSize();a.w=b.w;a.h=b.h;if(1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].e==a.e){var c=_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-
1].x-a.x,b=_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].y-a.y;if(8>=Math.abs(c)&&8>=Math.abs(b))return;var d=0;0<=c?d=1:0>c&&(d=-1);c=0;0<=b?c=1:0>b&&(c=-1);b=[d,c];if(0==b[0]&&0==b[1])return;b[0]!=_we3ctr.lastMouseMoveState[0]||b[1]!=_we3ctr.lastMouseMoveState[1]?(_we3ctr.eventsRepo.push(a),_we3ctr.lastMouseMoveState=b):_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=a}else _we3ctr.eventsRepo.push(a);break;case "resize":a.e=_we3ctr.eventTypesList[b.type];b=_we3ctr.getWindowsSize();a.w=b.w;a.h=
b.h;1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].e==a.e?_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=a:_we3ctr.eventsRepo.push(a);break;case "scroll":a.e=_we3ctr.eventTypesList[b.type],a.t=_we3ctr.getScrollTop(),a.l=_we3ctr.getScrollLeft(),1<=_we3ctr.eventsRepo.length&&_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].e==a.e?(_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].t>a.t?a.d="t":_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].t<a.t?a.d="d":_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-
1].l>a.l?a.d="l":_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].l<a.l&&(a.d="r"),_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1].d==a.d?_we3ctr.eventsRepo[_we3ctr.eventsRepo.length-1]=a:_we3ctr.eventsRepo.push(a)):(a.d="",_we3ctr.eventsRepo.push(a))}_we3ctr.eventsRepo.length>=_we3ctr.offloadThreshold&&(_we3ctr.offloadData(),_we3ctr.lastMouseMoveState=[0,0])};
we3cTracker.prototype.storeToSessionStorage=function(){if("undefined"!==typeof Storage){var b=this.repoStringify(this.eventsRepo);sessionStorage._we3cTrackerStoredState=b}};we3cTracker.prototype.submitSessionStorage=function(){null==sessionStorage._we3cTrackerStoredState||(!sessionStorage._we3cTrackerStoredState||3>sessionStorage._we3cTrackerStoredState.length)||(this.submitData(this.base64Encode(sessionStorage._we3cTrackerStoredState)),sessionStorage._we3cTrackerStoredState=null)};
we3cTracker.prototype.periodicOffload=function(){0<this.eventsRepo.length&&1E4<(new Date).getTime()-this.eventsRepo[this.eventsRepo.length-1].ts&&this.offloadData();setTimeout("_we3ctr.periodicOffload()",1E4)};we3cTracker.prototype.offloadData=function(){var b=this.eventsRepo;this.eventsRepo=[];this.submitData(this.base64Encode(this.repoStringify(b)))};we3cTracker.prototype.submitData=function(b){(new Image).src=this.eventServer+"?d="+b+"&host="+document.location.host+"&key="+this.accountApiKey};
we3cTracker.prototype.repoStringify=function(b){var a="",c;for(c in b){var d="",e;for(e in b[c])"ts"!=e&&(d+=b[c][e]+"|");d+=b[c].ts;a+=d+"}"}return a};we3cTracker.prototype.initTracking=function(){this.trackEvent({type:"init"});this.addEventListener(document,"mousedown",this.trackEvent);this.addEventListener(document,"mousemove",this.trackEvent);this.addEventListener(window,"resize",this.trackEvent);this.addEventListener(window,"scroll",this.trackEvent);this.addEventListener(window,"unload",this.trackEvent)};
we3cTracker.prototype.addEventListener=function(b,a,c){document.addEventListener?b?b.addEventListener(a,c,!1):addEventListener(a,c,!1):attachEvent&&(b?b.attachEvent("on"+a,c):attachEvent("on"+a,c))};
we3cTracker.prototype.getWindowsSize=function(){if("undefined"!=typeof window.innerWidth)return{w:window.innerWidth,h:window.innerHeight};if("undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth)return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}};
we3cTracker.prototype.getScrollLeft=function(){return window.pageXOffset?window.pageXOffset:document.documentElement?document.documentElement.scrollLeft:document.body?document.body.scrollLeft:0};we3cTracker.prototype.getScrollTop=function(){return window.pageYOffset?window.pageYOffset:document.documentElement?document.documentElement.scrollTop:document.body?document.body.scrollTop:0};
we3cTracker.prototype.base64Encode=function(b){var a,c,d,e,g=0,h=0,f="",f=[];if(!b)return b;do a=b.charCodeAt(g++),c=b.charCodeAt(g++),d=b.charCodeAt(g++),e=a<<16|c<<8|d,a=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,f[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);
while(g<b.length);f=f.join("");b=b.length%3;return(b?f.slice(0,b-3):f)+"===".slice(b||3)};_we3ctr=new we3cTracker(_we3ctr);_we3ctr.initTracking();setTimeout("_we3ctr.periodicOffload()",1E4);